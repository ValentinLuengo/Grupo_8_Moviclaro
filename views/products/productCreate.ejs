<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs', { title: "Crear producto"}) %>

    <body>
        <%- include('../partials/header.ejs') %>
            <main>
                <div class="main-register-login">
                    <h2 class="titulo-registro">Nuevo producto</h2>
                    <form action="/nuevoProducto" method="POST" enctype="multipart/form-data" class="formulario">
                        <div class="registro-formulario">
                            <!-- marca -->
                            <div class="registro-campos">
                                <label for="marca">Marca</label>
                                <select name="marca" id="marca" class="input">
                                    <% for (let i=0; i < brands.length; i++){ %>
                                        <option value="<%=brands[i].id%>">
                                            <%=brands[i].name%>
                                        </option>
                                    <% } %>
                                </select>
                            </div>
                            <!-- modelo -->
                            <div class="registro-campos">
                                <label for="modelo">Modelo</label>
                                <input type="text" name="modelo" id="modelo" class="input <%= locals.errors && errors.modelo ? 'is-invalid': null %>" value="<%= locals.oldData ? oldData.modelo : null %>">
                                <% if (locals.errors && errors.modelo) { %>
                                    <div  class="text-danger ">
                                        <%= errors.modelo.msg %>
                                    </div>
                                    <% } %>
                                    <div class="text-danger" id="modeloDanger"></div>
                            </div>
                            <!-- color -->
                            <div class="registro-campos"> 
                                <label>Color</label>
                                <select name="color" class="input select" >
                                    <% for (let i=0; i < color.length; i++){ %>
                                        <option value="<%=color[i].id%>">
                                            <%=color[i].name%>
                                        </option>
                                    <% } %>
                                </select>
                            </div>
                            <!-- precio -->
                            <div class="registro-campos">
                                <label for="precio">Precio</label>
                                <input type="number" name="precio" id="precio" class="input <%= locals.errors && errors.precio ? 'is-invalid': null %>" >
                                <% if (locals.errors && errors.precio) { %>
                                    <div  class="text-danger ">
                                        <%= errors.precio.msg %>
                                    </div>
                                    <% } %>
                                    <div class="text-danger" id="precioDanger"></div>

                            </div>
                            <!-- stock -->
                            <div class="registro-campos">
                                <label for="stock">Stock disponible</label>
                                <input type="number" name="stock" id="stock" class="input <%= locals.errors && errors.stock ? 'is-invalid': null %>">
                                <% if (locals.errors && errors.stock) { %>
                                    <div  class="text-danger ">
                                        <%= errors.stock.msg %>
                                    </div>
                                    <% } %>
                                    <div class="text-danger" id="stockDanger""></div>
                            </div>
                            <!-- categoria -->
                            <div class="registro-campos">
                                <label>Categoria</label>
                                <select name="category" class="input select">
                                    <% for (let i=0; i < category.length; i++){ %>
                                        <option value="<%=category[i].id%>">
                                            <%=category[i].name%>
                                        </option>
                                        <% } %>
                                    </select>
                            </div>
                            <!-- descripción -->
                            <div class="registro-campos">
                                <label for="descripcion">Descripción</label>
                                <textarea name="descripcion" id="descripcion" rows="10" cols="50" class="<%= locals.errors && errors.descripcion ? 'is-invalid': null %>"><% if(locals.oldData){%>
                                    <%= locals.oldData ? oldData.descripcion : null %>
                                    <% } %></textarea> 
                                <% if (locals.errors && errors.descripcion) { %>
                                    <div  class="text-danger ">
                                        <%= errors.descripcion.msg %>
                                    </div>
                                    <% } %>
                                    <div class="text-danger" id="descripcionDanger""></div>
                            </div>
                            <!-- subir imagen -->
                            <div class="registro-campos">
                                <label for="image">Subir imagen</label> </br>
                                <input 
                                    type="file" 
                                    name="image" 
                                    id="image" 
                                    class="<%= locals.errors && errors.image ? 'is-invalid': null %>" 
                                >

                                    <% if (locals.errors && errors.image) { %>

                                        <div class="text-danger">
                                            <%= errors.image.msg %>
                                        </div>

                                        <% } %>

                                        <div class="text-danger" id="imageDanger"></div>
                            </div>
                        </div>
                        <div class="botones">
                            <button type="reset" class="registro-boton registro-boton-red">BORRAR</button>
                            <button type="submit" class="registro-boton">ENVIAR</button>
                        </div>

                </div>
                </form>
                </div>

            </main>
            <%- include('../partials/footer.ejs') %>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
            <script src="../js/productsCreateValidation.js"></script>
            <!-- <script src="../../node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script> -->
            <!-- <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->

    </body>

</html>