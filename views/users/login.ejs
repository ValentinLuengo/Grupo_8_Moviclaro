<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs', { title: "Iniciar sesión"}) %>



<script src = "./js/loginValidation.js" ></script>
    <body>
        <%- include('../partials/header.ejs') %>
            <main>
                <div class="main-register-login">
                    <h2 class="titulo-registro">Accedé a tu cuenta</h2>
                    <form action="/login" method="POST" class="formulario login" id="formLogin" name= "formLogin">
                        <div class="registro-campos login">
                            <label for="email">E-mail</label>
                            <input type="text" name="email" id="email" class="input login  <%= locals.errors && errors.email ? 'is-invalid': null %>" value= "<%=locals.oldData ? oldData.email : null%>" >
                            <p  id="error" style="display: none"> El campo mail es obligatorio!</p>
                            <% if (locals.errors && errors.email) { %>
                                <div class="text-danger">
                                    <%= errors.email.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="registro-campos login">
                            <label for="password">Contraseña</label>
                            <input type="password" name="password" id="password" class="input login  <%= locals.errors && errors.password ? 'is-invalid': null %>">
                            <p  id="errorPassword" style="display: none"> El campo password es obligatorio!</p>
                            <% if (locals.errors && errors.password) { %>
                                <div class="text-danger">
                                    <%= errors.password.msg %>
                                </div>
                                <% } %> 
                        </div>
                        <div class="check">
                            <input type="checkbox" name="recordame" id="recordame">
                            <label for="recordame">Recordame</label>
                        </div>
                        <div class="botones">
                            <button type="submit" class="registro-boton login">ENTRAR</button>
                        </div>
                        <div>
                            <% if (typeof errors != 'undefined'){ %>
                                <ul>
                                    <% for(let i =0;i<errors.length;i++){ %>
                                        <li>
                                            <%=  errors[i].msg %>
                                        </li>
                                        <% } %>
                                </ul>
                                <% } %>
                        </div>

                        <div class="no-registrado">
                            <p>¿No estás registrado?</p>
                            <p>
                                <a href="/registro">Registrate aquí.</a>
                            </p>
                        </div>
                    </form>
                </div>
            </main>
            <%- include('../partials/footer.ejs') %>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.3/dist/sweetalert2.all.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    </body>

</html>